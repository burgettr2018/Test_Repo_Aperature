<VirtualHost *:80 *:443>
    ServerName login.owenscorning.com
    ServerAlias ums-prod.owenscorning.com
    ServerAlias ums.owenscorning.com
    ServerAlias ums-devel.owenscorning.com
    ServerAlias ums-stage.owenscorning.com
    ServerAlias login-prod.owenscorning.com
    ServerAlias login-devel.owenscorning.com
    ServerAlias login-stage.owenscorning.com
    ServerAlias ums-development.oc-proxy.com
    ServerAlias ums-prod-lb.owenscorning.com  
    ServerAlias login-prod-lb.owenscorning.com
 
# This section is not used behind a load balancer 
    <IfModule mod_ssl.c>
        SSLEngine on
        SSLCertificateFile /etc/pki/tls/certs/localhost.crt
        SSLCertificateKeyFile /etc/pki/tls/private/localhost.key
        SSLCertificateChainFile /etc/pki/tls/certs/DigiCertCA.crt
    </IfModule>
    
    DocumentRoot /data/ums/public
    <Directory /data/ums/public>
       Options -MultiViews
       <IfVersion < 2.4>
        Allow from all
       </IfVersion>
       <IfVersion >= 2.4>
        Require all granted
       </IfVersion>
    </Directory>

    <IfModule mod_ssl.c>
        RewriteEngine  on
        RewriteCond %{HTTPS} off
        # Add the following line for use with load balancer        
        RewriteCond %{HTTP:X-Forwarded-Proto} =http
        RewriteRule ^ https://%{HTTP_HOST}%{REQUEST_URI}
    </IfModule>

</VirtualHost>
